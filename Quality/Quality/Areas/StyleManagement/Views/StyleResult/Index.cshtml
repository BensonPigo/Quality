@using DatabaseObject.RequestModel;
@using DatabaseObject.ViewModel.SampleRFT;
@using DatabaseObject.ViewModel

@{
    ViewBag.Title = "Index";
    string download = ViewData["tempFilePath"] == null ? "" : ViewData["tempFilePath"].ToString();
}


@model DatabaseObject.ViewModel.SampleRFT.StyleResult_ViewModel

<link href="~/ThirdParty/plugins/DataTables/datatables.min.css" rel="stylesheet" />
<link href="~/ThirdParty/SciCustom/css/TableStyle.css" rel="stylesheet" />
<link href="~/ThirdParty/plugins/sweetalert2/sweetalert2.min.css" rel="stylesheet" />


<script src="~/ThirdParty/plugins/DataTables/datatables.min.js"></script>
<script src="~/ThirdParty/plugins/JsBarcode/JsBarcode.all.min.js"></script>

<style type="text/css">

    label {
        color: white
    }

    #SelectItemBackground {
        background-color: rgba(204, 204, 204, 0.5);
        bottom: 0;
        left: 0;
        position: fixed;
        right: 0;
        top: 0;
        z-index: 1041;
    }

    .SelectItem {
        width: 15vw;
        height: 45vh;
        position: absolute;
        left: 42vw;
        top: 30vh;
        z-index: 1043;
        overflow-y: auto;
    }

    .QueryLab {
        font-size: 2vh;
    }


    #btnBarcode {
        /*background-image: url('/Quality/Image/Icon/Barcode.png');*/
        background-image: url('../../../../Image/Icon/Barcode.png');
        background-size: 100% auto;
        background-color: white;
    }

    #Barcode {
        height: 10vh;
    }

    td {
        text-align: left;
    }

    #tab-Change {
        width: 100%;
    }

        #tab-Change > ul {
            display: block;
            margin: 0;
            list-style: none;
        }

    .tab-title {
        list-style: none;
    }

    #tab-Change > ul > li {
        display: inline-block;
        vertical-align: top;
        margin: 0 -1px -1px 0;
        border: 1px solid #BCBCBC;
        height: 4vh;
        line-height: 25px;
        background: #CDCDCD;
        padding: 0 15px;
        list-style: none;
        box-sizing: border-box;
    }

        #tab-Change > ul > li a {
            color: #000;
            text-decoration: none;
        }

        #tab-Change > ul > li.active {
            background: #fff;
        }

    #tab-Change > .tab-inner {
        padding: 10px;
        color: #000;
        border: 1px #BCBCBC solid;
        height: 50vh;
        overflow: scroll;
        overflow-x: hidden;
    }
    .tab-inner {
        background-color: rgb(255, 255, 255);
    }
</style>

<div class="main-content container">

    <header class="page-header">
        <h3>
            <i class=""></i><span>Style Result</span>
        </h3>
        <div class="breadcrumb">
            <div>Home</div>
            <div class="current">Style Result</div>
        </div>
    </header>


    <div class="main-area">

        <div class="content-scroll">
            <div class="inner-scroll" style="float:left">

                <div>
                    @using (Html.BeginForm("Query", ViewContext.RouteData.GetRequiredString("Controller"), new { }, FormMethod.Post, new { @class = "", @name = "SearchFrom", @id = "SearchFrom" }))
                    {
                        <div>
                            @Html.Hidden("StyleUkey")
                            <label class="QueryLab">Brand</label>
                            <input type="text" name="BrandID" id="txtBrand" class="searchText8vw" value="@Model.BrandID"/>
                            <input id="btnBrand" type="button" class="site-btn btn-blue" style="margin:0;border: 2px solid transparent;" name="" value="..." />
                            &nbsp;&nbsp;
                            <label class="QueryLab">Season</label>
                            <input type="text" name="SeasonID" id="txtSeason" class="searchText5vw" value="@Model.SeasonID"/>
                            <input id="btnSeason" type="button" class="site-btn btn-blue" style="margin:0;border: 2px solid transparent;" name="" value="..." />
                            &nbsp;&nbsp;
                            <label class="QueryLab">Style</label>
                            <input type="text" name="StyleID" id="txtStyle" class="searchText12vw" value="@Model.StyleID" />
                            <input id="btnStyle" type="button" class="site-btn btn-blue" style="margin:0;border: 2px solid transparent;" name="" value="..." />
                            &nbsp;&nbsp;
                            <input type="submit" name="action:Query"  id="btnQuery" value="Query" />
                            &nbsp;&nbsp;
                            <input id="btnBarcode" type="button" class="site-btn" style="margin:0;border: 2px solid transparent;" value="   " />

                            @*測試專用按鈕
                                <input id="btnPicture" type="button" class="site-btn btn-blue" style="margin:0;border: 2px solid transparent;" name="" value="..." />*@

                        </div>
                        
                        <input type="submit" class="btn-gy" name="action:SampleRFTToExcel" id="SampleRFTToExcel" value="To Excel"  style="display:none"/>
                    }
                </div>
                <br />
                <div>
                    <table style="border: 1px solid gray;font-size: 1vw;width: 100%;height: 50%;background-color: transparent;color: white;">
                        <tr>
                            <td style="width:10vw;border: 1px solid gray;background-color:#696868;vertical-align: middle;">
                                <label>Style#</label>
                            </td>
                            <td style="border: 1px solid gray;vertical-align: middle;width: 25vw;">
                                <span class="detail_Head" id="StyleID">@Model.StyleID</span>
                            </td>
                            <td style="width:10vw;border: 1px solid gray;background-color:#696868;vertical-align: middle;">
                                <label>Style Name</label>
                            </td>
                            <td style=" border: 1px solid gray;vertical-align: middle;width: 25vw;">
                                <span class="detail_Head" id="StyleName">@Model.StyleName</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="width:10vw;border: 1px solid gray;background-color:#696868;vertical-align: middle;">
                                <label>Brand</label>
                            </td>
                            <td style="border: 1px solid gray;vertical-align: middle;width: 25vw;">
                                <span class="detail_Head" id="Brand">@Model.BrandID</span>
                            </td>
                            <td style="width:10vw;border: 1px solid gray;background-color:#696868;vertical-align: middle;">
                                <label>Special Mark</label>
                            </td>
                            <td style=" border: 1px solid gray;vertical-align: middle;width: 25vw;">
                                <span class="detail_Head" id="SpecialMark">@Model.SpecialMark</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="width:10vw;border: 1px solid gray;background-color:#696868;vertical-align: middle;">
                                <label>Season</label>
                            </td>
                            <td style="border: 1px solid gray;vertical-align: middle;width: 25vw;">
                                <span class="detail_Head" id="Season">@Model.SeasonID</span>
                            </td>
                            <td style="width:10vw;border: 1px solid gray;background-color:#696868;vertical-align: middle;">
                                <label>SMR</label>
                            </td>
                            <td style=" border: 1px solid gray;vertical-align: middle;width: 25vw;">
                                <span class="detail_Head" id="SMR">@Model.SMR</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="width:10vw;border: 1px solid gray;background-color:#696868;vertical-align: middle;">
                                <label>Program</label>
                            </td>
                            <td style="border: 1px solid gray;vertical-align: middle;width: 25vw;">
                                <span class="detail_Head" id="Program">@Model.ProgramID</span>
                            </td>
                            <td style="width:10vw;border: 1px solid gray;background-color:#696868;vertical-align: middle;">
                                <label>Handle</label>
                            </td>
                            <td style=" border: 1px solid gray;vertical-align: middle;width: 25vw;">
                                <span class="detail_Head" id="Handle">@Model.Handle</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="width:10vw;border: 1px solid gray;background-color:#696868;vertical-align: middle;">
                                <label>Description</label>
                            </td>
                            <td style="border: 1px solid gray;vertical-align: middle;width: 25vw;">
                                <span class="detail_Head" id="Description">@Model.Description</span>
                            </td>
                            <td style="width:10vw;border: 1px solid gray;background-color:#696868;vertical-align: middle;">
                                <label>RFT</label>
                            </td>
                            <td style=" border: 1px solid gray;vertical-align: middle;width: 25vw;">
                                <span class="detail_Head" id="RFT">@Model.RFT</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="width:10vw;border: 1px solid gray;background-color:#696868;vertical-align: middle;">
                                <label>Product Type</label>
                            </td>
                            <td style="border: 1px solid gray;vertical-align: middle;width: 25vw;">
                                <span class="detail_Head" id="ProductType">@Model.ProductType</span>
                            </td>
                            <td style="width:10vw;border: 1px solid gray;background-color:#696868;vertical-align: middle;">
                                <label>Barcode</label>
                            </td>
                            <td style=" border: 1px solid gray;vertical-align: middle;width: 25vw;">
                                @*<span class="detail_Head" id="BarcodeText">@Model.StyleUkey</span>*@
                                <svg id="Barcode"></svg>
                            </td>
                        </tr>
                        <tr>
                            <td style="width:10vw;border: 1px solid gray;background-color:#696868;vertical-align: middle;">
                                <label>Article</label>
                            </td>
                            <td style="border: 1px solid gray;vertical-align: middle;" colspan="3">
                                <span class="detail_Head" id="width">@Model.Article</span>
                            </td>
                        </tr>
                    </table>
                </div>
                <br />
                <div id="tab-Change">
                    <ul class="tab-title">
                        <li link="#tab01" class="active">Sample RFT</li>
                        <li link="#tab02">FTY Disclaimer</li>
                        <li link="#tab03">RR/LR</li>
                        <li link="#tab04">Bulk FGT</li>
                    </ul>
                </div>
                <div id="tab01" class="tab-inner">
                    <div style="height:auto">
                        @Html.Partial("~/Areas/StyleManagement/Views/StyleResult/_Tab1_Layout.cshtml")
                    </div>
                </div>
                <div id="tab02" class="tab-inner">
                    @Html.Partial("~/Areas/StyleManagement/Views/StyleResult/_Tab2_Layout.cshtml")
                </div>
                <div id="tab03" class="tab-inner">
                    @Html.Partial("~/Areas/StyleManagement/Views/StyleResult/_Tab3_Layout.cshtml")
                </div>
                <div id="tab04" class="tab-inner">
                    @Html.Partial("~/Areas/StyleManagement/Views/StyleResult/_Tab4_Layout.cshtml")
                </div>
            </div>
        </div>
    </div>


</div>



<script type="text/javascript">

    var msg = new MessagerAlert();

    $(function () {
        if ('@Model.StyleUkey' != "") {
            // 參考網址https://lindell.me/JsBarcode/#download
            JsBarcode("#Barcode", '@Model.StyleUkey', {
                height: 40,
            });
        }
    
        if ('@download' != '') {
            window.location.href = '@download';
        }

        @Html.Raw(Model.MsgScript);


        tabChange();

        $('#btnBarcode').on('click', function () {
            window.open('@Url.Action("BarcodeScan")', 'Barcode Scan', config = 'toolbar=no,status=no,location=no,width=700,height=650');
        });

        $("#btnBrand").on('click', function () {

            // 共用元件使用方式
            // 1. 開啟 BrandList 視窗
            // 2. 宣告Callbacl事件，命名方式：Get + 開始視窗的Action名字，以這邊為例即是 GetBrandList即可取得回傳值
            window.open('@Url.Action("BrandList", "PublicWondow",new { Area=""})', 'Brand', config = 'toolbar=no,status=no,location=no,width=400,height=650');
        });

        $("#btnSeason").on('click', function () {

            window.open('@Url.Action("SeasonList", "PublicWondow",new { Area=""})' + '?BrandID=' + $("#txtBrand").val(), 'Season', config = 'toolbar=no,status=no,location=no,width=400,height=650' );
        });

        $("#btnStyle").on('click', function () {

            if ($("#txtBrand").val() != '' && $("#txtSeason").val() != '') {
                window.open('@Url.Action("StyleList", "PublicWondow",new { Area=""})' + '?BrandID=' + $("#txtBrand").val() + '&SeasonID=' + $("#txtSeason").val(), 'Style', config = 'toolbar=no,status=no,location=no,width=400,height=650');
            }
            else {
                msg.WithInfo("Please key-in Brand, Season first.");
            }
        });

        @* Picture共用元件範例 *@
        @*$("#btnPicture").on('click', function () {

            window.open('@Url.Action("TestFailMailList", "PublicWondow",new { Area=""})' + '?Title=PIC&FactoryID=ESP&Type=BulkFGT', 'Style', config = 'toolbar = no, status = no, location = no, width = 1000, height = 900' );
        });*@


    });

    // 2. 宣告事件，命名方式：Get + 開始視窗的Action名字，以這邊為例即是 GetBrandList
    function GetBrandList(BrandID) {
        $("#txtBrand").val(BrandID);
    }
    function GetSeasonList(SeasonID) {
        $("#txtSeason").val(SeasonID);
    }
    function GetStyleList(StyleID) {
        $("#txtStyle").val(StyleID);
    }

    function tabChange() {
        var $li = $('#tab-Change > ul.tab-title li');
        $($li.eq(0).attr('link')).show();

        $($li.eq(0).addClass('active').attr('link')).siblings('.tab-inner').hide();
        $li.click(function () {
            $($(this).attr('link')).show().siblings('.tab-inner').hide();
            $(this).addClass('active').siblings('.active').removeClass('active');
        });
    }


</script>